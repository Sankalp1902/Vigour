<!doctype html>
<html class="no-js" lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>DirectoryListing</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/progressbar_barfiller.css">
    <link rel="stylesheet" href="assets/css/gijgo.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/animated-headline.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyCp1RFkfg83VbZNUoExp3f63N0lOAXkraU",
            authDomain: "vigourservice-2426b.firebaseapp.com",
            databaseURL: "https://vigourservice-2426b-default-rtdb.firebaseio.com",
            projectId: "vigourservice-2426b",
            storageBucket: "vigourservice-2426b.appspot.com",
            messagingSenderId: "559196423373",
            appId: "1:559196423373:web:c0516b94d9866559b45584",
            measurementId: "G-0ZBXCN1DQ6"
        };
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();        
    </script>
      <script type="text/javascript">
    var database = firebase.database();
    var Post;
    firebase.auth().onAuthStateChanged(user => {  
      if(user) {         
        var userId = firebase.auth().currentUser.uid;
        return firebase.database().ref('/users/' + userId).once('value').then((snapshot) => {
          Post = (snapshot.val() && snapshot.val().Post);  
          if(Post!="user"){          
            window.location.href="/authenticate";
          }                  
        });                     
      }
      else{
        window.location.href="/authenticate";
      }
    })
  </script>
</head>
<body onload="filldata()">
    <!-- ? Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    Loading..
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->
    <header>
        <!-- Header Start -->
        <div class="header-area header-transparent">
            <div class="main-header header-sticky">
                <div class="container-fluid">
                    <div class="menu-wrapper d-flex align-items-center justify-content-between">
                        <!-- Logo -->
                        <div class="logo">
                            <a href="index.html"><img src="assets/img/logo/logo.png"  alt=""></a>
                        </div>
                        <!-- Main-menu -->
                        <div class="main-menu f-right d-none d-lg-block">
                            <nav>
                                <ul id="navigation">
                                    <li><a href="#">Top Ratings</a></li>                                                                        
                                    <li><a href="#KnowMore">Know More</a></li>
                                    <li><a href="contact.html">Contact us</a></li>
                                    <li id="profile_photo">
                                        <ul class="submenu">                                            
                                            <li><a href="#">My Feedbacks</a></li>
                                            <li><a href="/profile">My Appointments</a></li>
                                            <li id="logout"></li>
                                        </ul>
                                    </li>                                    
                                </ul>
                            </nav>
                        </div>          
                    <!-- Header-btn -->
                <!-- Mobile Menu -->
                <div class="col-12">
                    <div class="mobile_menu d-block d-lg-none"></div>
                </div>
            </div>
        </div>
    </div>
</div>                   
<!-- Header End -->
</header>
    <main>
    <!--? Hero Area Start-->
    <div class="slider-area hero-bg3 hero-overly">
        <div class="single-slider   slider-height2 d-flex align-items-end">
            <div class="container">
                <div class="directory-details-head">
                    <section class="wantToWork-area">
                        <div class="wants-wrapper w-padding3">
                            <div class="row align-items-center justify-content-between">
                                <div class="col-xl-8">
                                  <div class="details-cap d-flex">
                                    <div class="icon">
                                        <img src="assets/img/gallery/categori_icon1.png" alt=""> 
                                    </div>
                                    <div class="properties__caption">
                                        <h2 style="color: white;" id="name"></h2>
                                        <h3 id="category"></h3>
                                        <p id="address"></p>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-xl-4">
                                    <div class="double-btn f-right  d-flex flex-wrap">
                                        <a href="" id="weblink" class="border-btn w-btn wantToWork-btn mr-20" target="_blank"><i class="fas fa-globe"></i>Website</a>
                                        <a href="" id="phonelink" class="btn w-btn wantToWork-btn"><i class="fas fa-phone"></i>Call Now</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
   <!-- Directory Details start -->
    <div class="directory-details pt-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="small-tittle mb-20">
                        <h2>Description</h2>
                    </div>
                    <div class="directory-cap mb-40">
                        <p id="description"></p>
                    </div>
                    <div class="small-tittle mb-20">
                        <h2>Doctor's sitting hours:</h2>
                    </div>
                    <div class="directory-cap mb-40">                        
                        <p id="d_from">From </p>
                        <p id="d_to">to</p>
                    </div>
                    <div class="small-tittle mb-20">
                        <h2>Clinic hours:</h2>
                    </div>
                    <div class="directory-cap mb-40">
                        <p id="odays">Open days: </p>
                        <p id="c_ofrom">From </p>
                        <p id="c_oto">to </p>
                        <p id="hdays">Half days: </p>
                        <p id="c_hfrom">From </p>
                        <p id="c_hto">to </p>
                    </div>
                    <div class="small-tittle mb-20">
                        <h2>Gallery</h2>
                    </div>
                    <div class="gallery-img">
                        <div class="row">
                            <div class="col-lg-6">
                                <img src="assets/img/gallery/gallery1.png" class="mb-30" alt="">
                            </div>
                            <div class="col-lg-6">
                                <img src="assets/img/gallery/gallery2.png" class="mb-30" alt="">
                            </div>
                            <div class="col-lg-6">
                                <img src="assets/img/gallery/gallery3.png"  class="mb-30"alt="">
                            </div>
                            <div class="col-lg-6">
                                <img src="assets/img/gallery/gallery4.png"  class="mb-30"alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="form-wrapper pt-80">
                        <div class="row ">
                            <div class="col-xl-12">
                                <div class="small-tittle mb-30">                                    
                                    <button id="phonelink" data-toggle="modal"
                                        data-target="#login-modal" class="btn w-btn wantToWork-btn"><i class="fas fa-check"></i>Confirm Booking</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="map">
                        <img src="assets/img/gallery/map.png" alt="">
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
   <!-- Directory Details End -->    
    
    <!--? Want To work 02-->
    
            <!--? Want To work 02-->
            <section class="wantToWork-area" id="KnowMore">
                <div class="container">
                    <div class="wants-wrapper w-padding2">
                        <div class="row justify-content-between">
                            <div class="col-xl-8 col-lg-8 col-md-7">
                                <div class="wantToWork-caption wantToWork-caption2">
                                    <img src="assets/img/logo/logo.png"  alt="" class="mb-20">
                                    <p>Users and clinics can connect with us. Clinics needed to register themselves from the Register Clinic button. Users can simply login into there portal and book their appintments with any number of patients from single login and take appointments.</p>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-5">
                                <div class="footer-social f-right sm-left">
                                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#"><i class="fab fa-linkedin"></i></a>
                                    <a href="#"><i class="fab fa-instagram"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Want To work End -->
            <!--? Want To work 01-->
            <section class="wantToWork-area">
                <div class="container">
                    <div class="wants-wrapper">
                        <div class="row align-items-center justify-content-between">
                            <div class="col-xl-7 col-lg-9 col-md-8">
                                <div class="wantToWork-caption wantToWork-caption2">
                                    <div class="main-menu2">
                                        <nav>
                                            <ul>
                                                <li><a href="#">Search Doctor</a></li>
                                                <li><a href="#TopDoctor">Top Doctors Rating</a></li>
                                                <li><a href="#How">How to apply?</a></li> 
                                                <li><a href="contact.html">Contact Us</a></li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-2 col-lg-3 col-md-4">
                                <a href="#How" class="btn f-right sm-left">Register Your Clinic</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Want To work End -->
        </main>
        <footer>
            <div class="footer-wrapper pt-30">
                <!-- footer-bottom -->
                <div class="footer-bottom-area">
                    <div class="container">
                        <div class="footer-border">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="col-xl-10 col-lg-9">
                                    <div class="footer-copy-right text-center">
                                        <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                                            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This website is made with <i class="fa fa-heart" aria-hidden="true"></i> by Vigour developers
                                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>

            <!-- Scroll Up -->
            <div id="back-top" >
                <a title="Go to Top" href="#"> <i class="fas fa-level-up-alt"></i></a>
            </div>  

<div id="login-modal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-body">
                                                <div class="text-center mt-2 mb-4">
                                                    <a href="index.html" class="text-success">
                                                        <span><img class="mr-2" src="assets/images/logo-icon.png"
                                                                alt="" height="18"><img
                                                                src="assets/images/logo-text.png" alt=""
                                                                height="18"></span>
                                                    </a>
                                                </div>

                                                <form onsubmit="book(); return false;" class="pl-3 pr-3">
                                                                <br>
                                                            <label for="emailaddress1">Select appointee</label>
                                                    <div class="input-group-icon mt-10">
                                    
                                    <div class="form-select" id="default-select">
                                                <select required id="appointeeSelect">
                                                    <option disabled selected>Select an appointee</option>                                                                                            
                                                </select>
                                                    </div>
                                                </div>  
                                                    <div class="form-group"><br>
                                                        <label for="emailaddress1">Please enter a reason:</label>                                                       
                                                            <div class="mt-10">
                                    <textarea class="single-textarea" id="reason" placeholder="Message" required="" onfocus="this.placeholder = ''"
                                        onblur="this.placeholder = 'Message'" required></textarea>
                                </div>
                                                    </div>

                                                    <div class="form-group text-center">
                                                        <button class="btn btn-rounded btn-primary" type="submit">Confirm booking</button>
                                                    </div>

                                                </form>

                                            </div>
                                        </div><!-- /.modal-content -->
                                    </div><!-- /.modal-dialog -->
                                </div>
 <script type="text/javascript">  
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    document.getElementById("logout").innerHTML = "<a href='/logout'>Logout</a>";
                    var photo_url = user.photoURL;   
                    if(photo_url){                                            
                        document.getElementById("profile_photo").innerHTML += "<a href='/profile' class='mr-40'><img style='display: inline-block; border-radius: 60px; box-shadow: 0px 0px 3px #888; padding: 0.2em 0.2em;' height=40px width=40px src='"+photo_url+"'/></a>";
                    }else{
                        document.getElementById("profile_photo").innerHTML += "<a href='/authenticate' class='mr-40'><i class='ti-user' style='display: inline-block; border-radius: 60px; box-shadow: 0px 0px 3px #888; padding: 0.5em 0.6em;'></i></a>";
                    }   
                } else {
                    document.getElementById("profile_photo").innerHTML += "<a href='/authenticate' class='mr-40'><i class='ti-user' style='display: inline-block; border-radius: 60px; box-shadow: 0px 0px 3px #888; padding: 0.5em 0.6em;'></i></a>";
                }
            });

        </script>

        <script type="text/javascript">
            function filldata(){
                let params = (new URL(document.location)).searchParams;                
                var doc_id = params.get("doc_id");
                var clinic_id = params.get("clinic_id");
                var website;
                var phone;
                var add;
                var category;
                var Description;
                var name;
                var d_time;
                var d_time2;

                var c_hfrom;
                var c_hto;
                var c_ofrom;
                var c_oto;

                var halfdays;
                var fulldays;

                firebase.database().ref("clinic/"+clinic_id).once('value').then((snapshot) => {
                        website=snapshot.val().Website;
                         document.getElementById("weblink").href = "https://"+website; 
                         phone=snapshot.val().Telephone;
                         document.getElementById("phonelink").href = "tel:"+phone; 
                        add=snapshot.val().Full_address;
                        document.getElementById("address").innerHTML=add;

                        fulldays=snapshot.child("OpenDays/Days").val();
                        document.getElementById("odays").innerHTML+=fulldays;

                        halfdays=snapshot.child("HalfDays/Days").val();
                        document.getElementById("hdays").innerHTML+=halfdays;

                        c_hfrom=snapshot.child("HalfDays/TimeOpen").val();
                        document.getElementById("c_hfrom").innerHTML+=c_hfrom;

                        c_hto=snapshot.child("HalfDays/TimeClose").val();
                        document.getElementById("c_hto").innerHTML+=c_hto;

                        c_ofrom=snapshot.child("OpenDays/TimeOpen").val();
                        document.getElementById("c_ofrom").innerHTML+=c_ofrom;

                        c_oto=snapshot.child("OpenDays/TimeClose").val();
                        document.getElementById("c_oto").innerHTML+=c_oto;
                });

                firebase.database().ref("doctor/"+doc_id).once('value').then((snapshot1) => {
                        category=snapshot1.val().Category;
                         document.getElementById("category").innerHTML = "("+category+")"; 
                         Description=snapshot1.val().Description;
                         document.getElementById("description").innerHTML =Description; 
                        name=snapshot1.val().Name;
                        document.getElementById("name").innerHTML=name;

                        d_time=snapshot1.val().Timing_1;
                        document.getElementById("d_from").innerHTML=d_time;
                        d_time2=snapshot1.val().Timing_2;
                        document.getElementById("d_to").innerHTML=d_time2;
                });


firebase.auth().onAuthStateChanged(user => {  
                  if(user) {         
                      var userId = firebase.auth().currentUser.uid;
                    firebase.database().ref('/users/' + userId + '/Appointee').once('value').then((snapshot) => {
                            snapshot.forEach(function(data){ 
                            var t = data.val().Name;
                            var node = data.key;
                            $("#appointeeSelect").append("<option value='"+node+"'>"+t+"</option>");
                            $('#appointeeSelect').niceSelect('update'); 
                            });                                            
                    }); 
                  }                 
                });
                
            }

            function book(){                                    
                var Name;
                var Age;
                var Gender;
                var Phone;
                var Shown="0";
                var appointee=document.getElementById('appointeeSelect').value;
                var reason = document.getElementById('reason').value;
                //appointeeSelect
                firebase.auth().onAuthStateChanged(user => {  
                  if(user) {         
                      var userId = firebase.auth().currentUser.uid;
                      
                    firebase.database().ref('/users/' + userId + '/Appointee/'+appointee).once('value').then((snapshot) => {
                            
                                Name = snapshot.val().Name;
                                Age= snapshot.val().Age;
                                Gender=snapshot.val().Gender;
                                Phone=user.phoneNumber;

                                var d= new Date();
                                var year=d.getFullYear();
                                var month=d.getMonth();
                                month++;
                                var day=d.getDate();
                                if(day<10){
                                    day="0"+day;
                                }
                                if(month<10){
                                    month="0"+month;
                                }
                                
                                var date=year+month+day;


                                let params = (new URL(document.location)).searchParams;
                            var doc_id = params.get("doc_id");
                            var clinic_id = params.get("clinic_id");
                            var unique=date+doc_id+appointee;

                            firebase.database().ref('clinic/' + clinic_id + '/Appointments/'+date+ '/'+doc_id).set({
                                id:unique
                              });

                            firebase.database().ref('Appointments/' + date + '/'+doc_id+ '/'+unique).set({
                                Age:Age,
                                Gender:Gender,
                                Name: Name,
                                Phone: Phone,
                                Shown: Shown,
                                Reason: reason
                              });

                            firebase.database().ref('users/' + userId + '/Appointment/'+ date).set({
                                Dr:doc_id,
                                id:unique
                              });

window.location.href="/profile";
                                                                    
                    }); 

                  }                 
                });

            }
        </script>


    <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
    <!-- Jquery, Popper, Bootstrap -->
    <script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="./assets/js/popper.min.js"></script>
    <script src="./assets/js/bootstrap.min.js"></script>
    <!-- Jquery Mobile Menu -->
    <script src="./assets/js/jquery.slicknav.min.js"></script>

    <!-- Jquery Slick , Owl-Carousel Plugins -->
    <script src="./assets/js/owl.carousel.min.js"></script>
    <script src="./assets/js/slick.min.js"></script>
    <!-- One Page, Animated-HeadLin -->
    <script src="./assets/js/wow.min.js"></script>
    <script src="./assets/js/animated.headline.js"></script>
    <script src="./assets/js/jquery.magnific-popup.js"></script>

    <!-- Date Picker -->
    <script src="./assets/js/gijgo.min.js"></script>
    <!-- Nice-select, sticky -->
    <script src="./assets/js/jquery.nice-select.min.js"></script>
    <script src="./assets/js/jquery.sticky.js"></script>
    <!-- Progress -->
    <script src="./assets/js/jquery.barfiller.js"></script>
    
    <!-- counter , waypoint,Hover Direction -->
    <script src="./assets/js/jquery.counterup.min.js"></script>
    <script src="./assets/js/waypoints.min.js"></script>
    <script src="./assets/js/jquery.countdown.min.js"></script>
    <script src="./assets/js/hover-direction-snake.min.js"></script>

    <!-- contact js -->
    <script src="./assets/js/contact.js"></script>
    <script src="./assets/js/jquery.form.js"></script>
    <script src="./assets/js/jquery.validate.min.js"></script>
    <script src="./assets/js/mail-script.js"></script>
    <script src="./assets/js/jquery.ajaxchimp.min.js"></script>
    
    <!-- Jquery Plugins, main Jquery -->    
    <script src="./assets/js/plugins.js"></script>
    <script src="./assets/js/main.js"></script>

    
    </body>
</html>